<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BubbleUP: FFmpegVideoPlayer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="AgniSamooh-app-ico-logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">BubbleUP<span id="projectnumber">&#160;v0.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_f_fmpeg_video_player-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">FFmpegVideoPlayer Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Declaration file for using FFmpeg in your SDL program to play a video from any format.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_f_fmpeg_video_player_8hpp_source.html">FFmpegVideoPlayer.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae8543119fe857f1e38996542f2326d5f" id="r_ae8543119fe857f1e38996542f2326d5f"><td class="memItemLeft" align="right" valign="top"><a id="ae8543119fe857f1e38996542f2326d5f" name="ae8543119fe857f1e38996542f2326d5f"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>FFmpegVideoPlayer</b> (const char *videoFile, const char *musicFile, SDL_Window *window, SDL_Renderer *renderer)</td></tr>
<tr class="memdesc:ae8543119fe857f1e38996542f2326d5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">default <a class="el" href="class_f_fmpeg_video_player.html" title="Declaration file for using FFmpeg in your SDL program to play a video from any format.">FFmpegVideoPlayer</a> constructor <br /></td></tr>
<tr class="separator:ae8543119fe857f1e38996542f2326d5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fbc755471d0b1013656330e75e15ce9" id="r_a3fbc755471d0b1013656330e75e15ce9"><td class="memItemLeft" align="right" valign="top"><a id="a3fbc755471d0b1013656330e75e15ce9" name="a3fbc755471d0b1013656330e75e15ce9"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>~FFmpegVideoPlayer</b> ()</td></tr>
<tr class="memdesc:a3fbc755471d0b1013656330e75e15ce9"><td class="mdescLeft">&#160;</td><td class="mdescRight">default <a class="el" href="class_f_fmpeg_video_player.html" title="Declaration file for using FFmpeg in your SDL program to play a video from any format.">FFmpegVideoPlayer</a> deconstructor <br /></td></tr>
<tr class="separator:a3fbc755471d0b1013656330e75e15ce9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75a69389b294c24c25289c482bd71691" id="r_a75a69389b294c24c25289c482bd71691"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a75a69389b294c24c25289c482bd71691">playAudio</a> ()</td></tr>
<tr class="memdesc:a75a69389b294c24c25289c482bd71691"><td class="mdescLeft">&#160;</td><td class="mdescRight">play audioFile  <br /></td></tr>
<tr class="separator:a75a69389b294c24c25289c482bd71691"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2c678c88a09d5b5bbbddb38d57ab2ff" id="r_af2c678c88a09d5b5bbbddb38d57ab2ff"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af2c678c88a09d5b5bbbddb38d57ab2ff">playVideo</a> ()</td></tr>
<tr class="memdesc:af2c678c88a09d5b5bbbddb38d57ab2ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">play the video and call the audio at the same time  <br /></td></tr>
<tr class="separator:af2c678c88a09d5b5bbbddb38d57ab2ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Declaration file for using FFmpeg in your SDL program to play a video from any format. </p>
<p>Declarations: ./headers/FFmpegVideoPlayer.hpp Definitions: ./src/FFmpegVideoPlayer.cpp</p>
<p>REQUIREMENTS</p>
<p>FFMPEG is the worlds largest open source multimedia framework for video playback and codec methods. FFMPEG requires building if you require include, libs and .dll's to utilise in a C/C++ program.</p>
<p>Currently this code is requiring manual user intervention to split audio track from video using any tool e.g. a free online converter: <a href="https://biteable.com/tools/extract-audio-from-video/">https://biteable.com/tools/extract-audio-from-video/</a> then add it in the constructor to play during the video. Ideally it should be read from audio channel.</p>
<p>WINDOWS BUILD GUIDE</p>
<p>FFMPEG has no CMAKE to date for building on windows with "cmake -G "MinGW Makefiles" ..". This requires building ffmpeg using a Linux CLI or MSYS2 if on Windows.</p>
<ol type="1">
<li>Download ffmpeg source code to new directory "c : \ ffmpeg" from here: <a href="https://ffmpeg.org/download.html">https://ffmpeg.org/download.html</a></li>
<li>(Optional Windows) Install MSYS2 from guide here: <a href="https://www.msys2.org/">https://www.msys2.org/</a></li>
<li>Run below commands (If using Windows run commands from MSYS2 Mingw64) note: running 'make' may take some time ~60 mins <div class="fragment"><div class="line">cd c : \ ffmpeg</div>
<div class="line">./configure  --prefix=c:/ffmpeg --enable-shared --enable-gpl --disable-programs</div>
<div class="line">make</div>
<div class="line">make install</div>
</div><!-- fragment --></li>
<li>Use the below include, lib and linkers paths for your IDE, or CLI "args": [ "-fdiagnostics-color=always", "-IC :/ffmpeg/include", "-g", "${file}", "-o", "${fileDirname}/${fileBasenameNoExtension}.exe", "-LC :/ffmpeg/lib", "-lavformat", "-lavcodec", "-lavutil", "-lswscale", "-lswresample" ], Last step. Copy the dll files below from the C, ffmpeg, bin directory to your projects directory besides your executable avcodec-61.dll, avformat-61.dll, avutil-59.dll, swresample-5.dll</li>
</ol>
<p>LINUX BUILD GUIDE</p>
<p>Run the bellow commands in sequence to get the headers and libs installed in default linux location /opt/homebrew/include and /lib</p>
<ol type="1">
<li>sudo apt-get install build-essential libmp3lame-dev libopus-dev libvpx-dev libx264-dev libx265-dev libfdk-aac-dev</li>
<li>git clone <a href="https://git.ffmpeg.org/ffmpeg.git">https://git.ffmpeg.org/ffmpeg.git</a></li>
<li>cd ffmpeg</li>
<li>./configure &ndash;prefix=/usr/local &ndash;enable-gpl &ndash;enable-nonfree &ndash;enable-libmp3lame &ndash;enable-libopus &ndash;enable-libvpx &ndash;enable-libx264 &ndash;enable-libx265 &ndash;enable-libfdk-aac</li>
<li>make -j$(nproc)</li>
<li>sudo make install</li>
<li>Link with the below 7a. Headers directory /opt/homebrew/include 7b. Libray directory /opt/homebrew/lib 7c. libraries "-lavformat", "-lavcodec", "-lavutil", "-lswscale", "-lswresample"</li>
</ol>
<p>MACOS BUILD GUIDE</p><ol type="1">
<li>run the below; brew install ffmpeg</li>
<li>Link against the required libs "-lavformat", // FFmpeg libraries "-lavcodec", // FFmpeg libraries "-lavutil", // FFmpeg libraries "-lswscale", // FFmpeg libraries</li>
</ol>
<p>TROUBLESHOOTING</p>
<p>NoteL Optional only if you get errors when compiling with this old C style ffmpeg headers with modern c++ libraries like boost you may have conflicts compiling with stl being different in the ffmpeg folder. In that case you may need to delete the offending folders keeping only the necessary include/lib folders as well as the .dll's e.g; for this folder: "C :\ ffmpeg" the only necessary files inside to compile are below, you can delete the rest.</p><ul>
<li>bin</li>
<li>compat</li>
<li>ffbuild</li>
<li>fftools</li>
<li>include</li>
<li>lib</li>
<li>libavcodec</li>
<li>libavdevice</li>
<li>libavfilter</li>
<li>libavformat</li>
<li>libavutil</li>
<li>libpostproc</li>
<li>libswresample</li>
<li><p class="startli">libswscale</p>
<p class="startli">EXAMPLE</p><ol type="1">
<li>Include this class in desired program include &lt;<a class="el" href="_f_fmpeg_video_player_8hpp_source.html">FFmpegVideoPlayer.hpp</a>&gt;</li>
<li>Instantiate the class into an object ensuring a valid window/renderer is passed</li>
</ol>
<p class="startli"><a class="el" href="class_f_fmpeg_video_player.html" title="Declaration file for using FFmpeg in your SDL program to play a video from any format.">FFmpegVideoPlayer</a> videoPlayer("sample.mp4", window, renderer);</p><ol type="1">
<li>Play the video. It will block the stack until it ends like any standard function.</li>
</ol>
<p class="startli">videoPlayer.playVideo(); </p>
</li>
</ul>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a75a69389b294c24c25289c482bd71691" name="a75a69389b294c24c25289c482bd71691"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75a69389b294c24c25289c482bd71691">&#9670;&#160;</a></span>playAudio()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FFmpegVideoPlayer::playAudio </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>play audioFile </p>
<p>The audio playback pipeline is below</p>
<p>Original file -&gt; split into videoFile/musicFile -&gt; musicFile -&gt; initialise SDL_Mixer -&gt; Mix_PlayMusic -&gt; <a class="el" href="#a75a69389b294c24c25289c482bd71691" title="play audioFile">playAudio()</a> -&gt; <a class="el" href="#af2c678c88a09d5b5bbbddb38d57ab2ff" title="play the video and call the audio at the same time">playVideo()</a> {<a class="el" href="#a75a69389b294c24c25289c482bd71691" title="play audioFile">playAudio()</a>} </p>

</div>
</div>
<a id="af2c678c88a09d5b5bbbddb38d57ab2ff" name="af2c678c88a09d5b5bbbddb38d57ab2ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2c678c88a09d5b5bbbddb38d57ab2ff">&#9670;&#160;</a></span>playVideo()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void FFmpegVideoPlayer::playVideo </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>play the video and call the audio at the same time </p>
<p>The video playback pipeline is below</p>
<p>Original file -&gt; split into videoFile/musicFile -&gt; videoFile -&gt; videoStream -&gt; while (packet -&gt; frame -&gt; texture -&gt; renderer)</p>
<p>Their is an input event loop because it's important to allow moving/resizing/closing the window while the video is playing if you havn't initialised the event loop outside of this function yet. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>headers/<a class="el" href="_f_fmpeg_video_player_8hpp_source.html">FFmpegVideoPlayer.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
